# [@allthings/elements](https://github.com/allthings/elements)

<img alt="npm version" src="https://badge.fury.io/js/%40allthings%2Felements.svg"> [![Build Status](https://travis-ci.org/allthings/elements.svg?branch=master)](https://travis-ci.org/allthings/elements) [![Greenkeeper badge](https://badges.greenkeeper.io/allthings/elements.svg)](https://greenkeeper.io/)



 Elements is a set of **carefully crafted, high quality React UI components,** that [Allthings](https://www.allthings.me) uses to build their mobile app.

## Installation

Elements are available on [npm package](https://www.npmjs.com/package/@allthings/elements).

```sh
yarn add @allthings/elements
```

Please note that `@allthings/elements` is still under heavy development.

## Usage

Here is a quick example to get you started, it's all you need:

```jsx
import React from 'react'
import { render¬†} from 'react-dom'
import Button from '@allthings/elements/molecules/Button'

function App() {
  return (
    <Button>
      Hello World
    </Button>
  )
}

render(<App />, document.querySelector('#app'))
```

## Examples

Are you looking for some full example projects to get started?
[Check this out](https://github.com/allthings/elements-example).

## Documentation

Check out our [documentation website](https://developers.allthings.me/elements/index.html).

## Writing unit tests

Whenever you create or edit a React component or any other JavaScript file, you must update or create a corresponding test file in the same directory.

By convention the test file should be named after the file's name with an additional `.test.` part:

```sh
SomeDir
  | - MyButton.jsx
  | - MyButton.test.jsx
```

```sh
SomeOtherDir
  | - utils.js
  | - utils.test.js
```

To manually trigger the unit tests, run:

```sh
yarn test:unit
```

You can also use the corresponding watch task:

```sh
yarn watch:test:unit
```

The unit tests are performed using the [Jest platform](https://facebook.github.io/jest/), please refer to its documentation.

React component testing is based on the [Enzyme testing utility](http://airbnb.io/enzyme/docs/api/), please refer to its documentation.

The use of snapshots generated by the `toMatchSnapshot()` method is strongly encouraged. [Those snapshots must be always commited as they are a very useful tool whenever you want to make sure your UI does not change unexpectedly](https://facebook.github.io/jest/docs/en/snapshot-testing.html)

## Local development in another app

If you want to make changes to `@allthings/elements` and see them taking effect in your app instantly, we've got good news for you. Just follow these instructions‚Ä¶

### üõ† Initial steps

1. Install [**yalc**](https://github.com/whitecolor/yalc): `yarn global add yalc`
1. Create a build with `yarn build`.
1. Publish the build folder `yalc publish build`. Don't worry this will only 'publish' to a local store located on the hard disk (see yalc docs to read more about this).

**tl;dr**

```sh
yarn global add yalc
```
```sh
cd @allthings/elements
yarn build
yalc publish build
```

### ‚òïÔ∏è Start developing in your app

1. Go to the app, which will consume the local elements repository and execute `yalc add --link @allthings/elements`
1. Run `yarn` so it will fetch the local repository now.
1. Go back to `@allthings/elements` repository.
1. Run `yarn babel:watch`.
1. Make some changes üßö‚Äç‚ú®
1. Run `yalc push build`.
1. Changes will be propagated to all linked projects.
1. Everytime you do some changes you can run `yalc push build` again.

**tl;dr**

```sh
cd /path/to/project
yalc add --link @allthings/elements
yarn

cd /path/to/@allthings/elements
yarn babel:watch
# Do some some changes
yalc push build
```


> What does `yalc add --link` do?
>
  * Create a folder `.yalc` with the contents of the current local `@allthings/elements` repository.
  * Create a `yalc.lock` file for computational stuff.
  * Modify the `package.json` to load the package from `link:.yalc/@allthings/elements`.
>
> Be sure to not commit any of these changes. Consider adding the created files to `.gitignore`.
> See [`yalc`](https://github.com/whitecolor/yalc#what) for more information.

### üèÅ Clean up, after you're done

```sh
cd /path/to/project
yalc remove @allthings/elements
yarn
```


#### ‚ö†Ô∏è Note:

##### webpack externals:
If you're using server side rendering alongside with `webpack-node-externals`, be sure to add everything elements related to the whitelist: 

```js
// webpack.config.js
{
  externals: externals({ whitelist: [/^@allthings\/elements/] }),
  // ...
}
```

##### Serverless with `serverless-webpack`
It seems that `serverless-webpack` does not recognize the `link:` format in, as [it doesn't support yarn *yet*](https://github.com/serverless-heaven/serverless-webpack/issues/286).

Rather than using `yalc add --link @allthings/elements` you should use `yalc add @allthings/elements`.
